apiVersion: constraints.gatekeeper.sh/v1beta1
kind: K8sRequiredSecretVolume
metadata:
  name: require-backstage-mtls-secret
spec:
  match:
    kinds:
      - apiGroups: ["apps"]
        kinds: ["Deployment"]
    namespaceSelector:
      matchExpressions:
        - key: workload.env
          operator: In
          values: ["prod"]
  parameters:
    secretName: "backstage-mtls"
